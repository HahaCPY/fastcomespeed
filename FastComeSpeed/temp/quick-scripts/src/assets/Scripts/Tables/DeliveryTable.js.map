{"version":3,"sources":["assets/Scripts/Tables/DeliveryTable.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,yCAAyC;AACzC,yBAAiD;AACjD,iCAAgC;AAEhC,0DAAyD;AACzD,6CAA4C;AAEpC,IAAA,OAAO,GAAe,eAAU,QAAzB,EAAE,QAAQ,GAAK,eAAU,SAAf,CAAgB;AAGzC;IAAmC,iCAAK;IAAxC;QAAA,qEAyCC;QAvCG,eAAS,GAAS,IAAI,CAAC;QAGvB,YAAM,GAAS,IAAI,CAAC;QAGZ,QAAE,GAAqB,IAAI,CAAC;;IAiCxC,CAAC;IA/BG,6BAAK,GAAL;QACI,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,sBAAsB,CAAC,+BAAc,CAAC,CAAC;QACrE,IAAI,CAAC,EAAE,GAAG,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,sBAAsB,CAAC,qBAAS,CAAC,CAAC;IAChE,CAAC;IAEM,oCAAY,GAAnB,UAAoB,KAAY;;QAC5B,IAAM,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC;QAC7C,IAAI,MAAM,EAAE;YACR,IAAI,CAAC,aAAa,EAAE,CAAC;YACrB,MAAA,IAAI,CAAC,EAAE,0CAAE,YAAY,CAAC,IAAI,EAAE;YAC5B,KAAK,CAAC,IAAI,CAAC,OAAO,EAAE,CAAC;SACxB;aAAM;YACH,IAAI,CAAC,UAAU,EAAE,CAAC;YAClB,MAAA,IAAI,CAAC,EAAE,0CAAE,YAAY,CAAC,KAAK,EAAE;SAChC;QACD,OAAO,MAAM,CAAC;IAClB,CAAC;IAED,qCAAa,GAAb;QAAA,iBAKC;QAJG,IAAI,IAAI,CAAC,SAAS,EAAE;YAChB,IAAI,CAAC,SAAS,CAAC,MAAM,GAAG,IAAI,CAAC;YAC7B,IAAI,CAAC,YAAY,CAAC,cAAM,OAAA,CAAC,KAAI,CAAC,SAAS,CAAC,MAAM,GAAG,KAAK,CAAC,EAA/B,CAA+B,EAAE,CAAC,CAAC,CAAC;SAC/D;IACL,CAAC;IAED,kCAAU,GAAV;QAAA,iBAKC;QAJG,IAAI,IAAI,CAAC,MAAM,EAAE;YACb,IAAI,CAAC,MAAM,CAAC,MAAM,GAAG,IAAI,CAAC;YAC1B,IAAI,CAAC,YAAY,CAAC,cAAM,OAAA,CAAC,KAAI,CAAC,MAAM,CAAC,MAAM,GAAG,KAAK,CAAC,EAA5B,CAA4B,EAAE,CAAC,CAAC,CAAC;SAC5D;IACL,CAAC;IAtCD;QADC,QAAQ,CAAC,SAAI,CAAC;oDACQ;IAGvB;QADC,QAAQ,CAAC,SAAI,CAAC;iDACK;IALX,aAAa;QADzB,OAAO,CAAC,eAAe,CAAC;OACZ,aAAa,CAyCzB;IAAD,oBAAC;CAzCD,AAyCC,CAzCkC,aAAK,GAyCvC;AAzCY,sCAAa","file":"","sourceRoot":"/","sourcesContent":["// assets/Scripts/Tables/DeliveryTable.ts\nimport { _decorator, Component, Node } from 'cc';\nimport { Table } from './Table';\nimport { Plate } from '../Objects/Plate';\nimport { ReceiptsEngine } from '../Other/ReceiptsEngine';\nimport { UIManager } from '../UI/UIManager';\n\nconst { ccclass, property } = _decorator;\n\n@ccclass('DeliveryTable')\nexport class DeliveryTable extends Table {\n    @property(Node)\n    successFx: Node = null;\n\n    @property(Node)\n    failFx: Node = null;\n\n    private engine: ReceiptsEngine;\n    private ui: UIManager | null = null;\n\n    start() {\n        this.engine = this.node.scene.getComponentInChildren(ReceiptsEngine);\n        this.ui = this.node.scene.getComponentInChildren(UIManager);\n    }\n\n    public deliverPlate(plate: Plate): boolean {\n        const result = this.engine.checkPlate(plate);\n        if (result) {\n            this.playSuccessFx();\n            this.ui?.showFeedback(true);\n            plate.node.destroy();\n        } else {\n            this.playFailFx();\n            this.ui?.showFeedback(false);\n        }\n        return result;\n    }\n\n    playSuccessFx() {\n        if (this.successFx) {\n            this.successFx.active = true;\n            this.scheduleOnce(() => (this.successFx.active = false), 1);\n        }\n    }\n\n    playFailFx() {\n        if (this.failFx) {\n            this.failFx.active = true;\n            this.scheduleOnce(() => (this.failFx.active = false), 1);\n        }\n    }\n}\n"]}