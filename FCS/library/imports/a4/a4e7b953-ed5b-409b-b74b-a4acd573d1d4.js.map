{"version":3,"sources":["assets\\Script\\NPC\\NPCWanderCatty.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["const { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class NPCWanderCatty extends cc.Component {\r\n    @property(cc.Animation)\r\n    anim: cc.Animation = null;\r\n\r\n    @property\r\n    speed: number = 50;\r\n\r\n    private direction: cc.Vec3 = cc.v3();\r\n    private moveTimer: number = 0;\r\n    private animTimer: number = 0;\r\n\r\n    onLoad() {\r\n        if (!this.anim) {\r\n            this.anim = this.getComponent(cc.Animation);\r\n        }\r\n        this.pickRandomDirection();\r\n        this.playAnim(\"cat_run\");\r\n    }\r\n\r\nupdate(dt: number) {\r\n    // 🐾 移動\r\n    const moving = this.direction.mag() > 0.1;\r\n    if (moving) {\r\n        this.node.x += this.direction.x * this.speed * dt;\r\n        this.node.y += this.direction.y * this.speed * dt;\r\n    }\r\n\r\n    // ⏱️ 定時換方向\r\n    this.moveTimer += dt;\r\n    if (this.moveTimer >= 2 + Math.random() * 2) {\r\n        this.pickRandomDirection();\r\n        this.moveTimer = 0;\r\n    }\r\n\r\n    // 🎬 自動切動畫\r\n    if (moving) {\r\n        this.playAnim(\"cat_run\");\r\n    } else {\r\n        this.playAnim(\"cat_idle\");\r\n    }\r\n\r\n    // 👀 左右翻轉\r\n    if (Math.abs(this.direction.x) > 0.1) {\r\n        this.node.scaleX = this.direction.x > 0 ? 5 : -5;\r\n    }\r\n}\r\n\r\n\r\n    pickRandomDirection() {\r\n        const angle = Math.random() * Math.PI * 2;\r\n        this.direction = cc.v3(Math.cos(angle), Math.sin(angle), 0);\r\n    }\r\n\r\n    randomAnim() {\r\n        const choices = [\"cat_idle\", \"cat_run\", \"cat_jump\"];\r\n        const name = choices[Math.floor(Math.random() * choices.length)];\r\n        this.playAnim(name);\r\n    }\r\n\r\n    playAnim(name: string) {\r\n        if (!this.anim || !this.anim.getAnimationState(name)) return;\r\n        this.anim.play(name);\r\n    }\r\n}\r\n"]}