{"version":3,"sources":["assets\\Script\\script\\PlayerAnimationController.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAAM,IAAA,KAAwB,EAAE,CAAC,UAAU,EAAnC,OAAO,aAAA,EAAE,QAAQ,cAAkB,CAAC;AAC5C,2DAA+C;AAG/C;IAAuD,6CAAY;IAAnE;QAAA,qEAuDC;QArDG,qBAAe,GAAY,IAAI,CAAC,CAAC,oBAAoB;QAGrD,aAAO,GAAY,IAAI,CAAC,CAAC,gBAAgB;QAGzC,aAAO,GAAY,IAAI,CAAC,CAAC,gBAAgB;QAGzC,gBAAU,GAAc,IAAI,CAAC,CAAC,YAAY;QAG1C,iBAAW,GAAc,IAAI,CAAC,CAAC,WAAW;QAG1C,sBAAgB,GAAY,IAAI,CAAC,CAAC,WAAW;;IAsCjD,CAAC;IApCG,yCAAK,GAAL;QAAA,iBAUC;QATG,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,EAAE,CAAC,OAAO,EAAE;YAC7B,4BAAW,CAAC,iBAAiB,GAAG,CAAC,CAAC;YAClC,KAAI,CAAC,eAAe,CAAC,WAAW,CAAC,CAAC;QACtC,CAAC,EAAE,IAAI,CAAC,CAAC;QAET,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,EAAE,CAAC,OAAO,EAAE;YAC9B,4BAAW,CAAC,iBAAiB,GAAG,CAAC,CAAC;YAClC,KAAI,CAAC,eAAe,CAAC,YAAY,CAAC,CAAC;QACvC,CAAC,EAAE,IAAI,CAAC,CAAC;IACb,CAAC;IAGD,qDAAiB,GAAjB;QACI,IAAG,IAAI,CAAC,gBAAgB,CAAC,MAAM,KAAK,KAAK,EAAE;YACvC,OAAO,IAAI,CAAC,OAAO,CAAC;SACvB;QACD,4BAA4B;QAC5B,IAAM,OAAO,GAAG,IAAI,CAAC,eAAe,CAAC,uBAAuB,CAAC,EAAE,CAAC,MAAM,CAAC,CAAC;QACxE,IAAM,WAAW,GAAG,OAAO,CAAC,SAAS,CAAC,UAAA,CAAC,IAAI,OAAA,CAAC,CAAC,SAAS,EAAX,CAAW,CAAC,CAAC;QACxD,2BAA2B;QAC3B,IAAI,WAAW,KAAK,CAAC,EAAE;YACnB,OAAO,IAAI,CAAC,OAAO,CAAC;SACvB;aAAM;YACH,OAAO,IAAI,CAAC,OAAO,CAAC;SACvB;IACL,CAAC;IAED,mDAAe,GAAf,UAAgB,QAAgB;QAC5B,IAAM,MAAM,GAAG,IAAI,CAAC,iBAAiB,EAAE,CAAC;QACxC,IAAI,CAAC,MAAM;YAAE,OAAO;QACpB,IAAM,IAAI,GAAG,MAAM,CAAC,YAAY,CAAC,EAAE,CAAC,SAAS,CAAC,CAAC;QAC/C,IAAI,IAAI,EAAE;YACN,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;SACvB;IACL,CAAC;IApDD;QADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;sEACc;IAGhC;QADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;8DACM;IAGxB;QADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;8DACM;IAGxB;QADC,QAAQ,CAAC,EAAE,CAAC,MAAM,CAAC;iEACS;IAG7B;QADC,QAAQ,CAAC,EAAE,CAAC,MAAM,CAAC;kEACU;IAG9B;QADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;uEACe;IAjBhB,yBAAyB;QAD7C,OAAO;OACa,yBAAyB,CAuD7C;IAAD,gCAAC;CAvDD,AAuDC,CAvDsD,EAAE,CAAC,SAAS,GAuDlE;kBAvDoB,yBAAyB","file":"","sourceRoot":"/","sourcesContent":["const { ccclass, property } = cc._decorator;\r\nimport GameManager from \"./GameManager-level1\";\r\n\r\n@ccclass\r\nexport default class PlayerAnimationController extends cc.Component {\r\n    @property(cc.Node)\r\n    toggleGroupNode: cc.Node = null; // 拖入 ToggleGroup 節點\r\n\r\n    @property(cc.Node)\r\n    player1: cc.Node = null; // 拖入 player1 節點\r\n\r\n    @property(cc.Node)\r\n    player2: cc.Node = null; // 拖入 player2 節點\r\n\r\n    @property(cc.Button)\r\n    buttonGirl: cc.Button = null; // 按鈕1（idle）\r\n\r\n    @property(cc.Button)\r\n    buttonGirl2: cc.Button = null; // 按鈕2（run）\r\n\r\n    @property(cc.Node)\r\n    choosePlayerNode: cc.Node = null; // 拖入選擇玩家節點\r\n\r\n    start() {\r\n        this.buttonGirl.node.on('click', () => {\r\n            GameManager.selectedCharIndex = 0;\r\n            this.changeAnimation('girl_idle');\r\n        }, this);\r\n\r\n        this.buttonGirl2.node.on('click', () => {\r\n            GameManager.selectedCharIndex = 1;\r\n            this.changeAnimation('girl2_idle');\r\n        }, this);\r\n    }\r\n\r\n\r\n    getSelectedPlayer(): cc.Node {\r\n        if(this.choosePlayerNode.active === false) {\r\n            return this.player1;\r\n        }\r\n        // 取得 ToggleGroup 下所有 Toggle\r\n        const toggles = this.toggleGroupNode.getComponentsInChildren(cc.Toggle);\r\n        const selectedIdx = toggles.findIndex(t => t.isChecked);\r\n        // 根據選擇回傳 player1 或 player2\r\n        if (selectedIdx === 0) {\r\n            return this.player1;\r\n        } else {\r\n            return this.player2;\r\n        }\r\n    }\r\n\r\n    changeAnimation(animName: string) {\r\n        const player = this.getSelectedPlayer();\r\n        if (!player) return;\r\n        const anim = player.getComponent(cc.Animation);\r\n        if (anim) {\r\n            anim.play(animName);\r\n        }\r\n    }\r\n}"]}