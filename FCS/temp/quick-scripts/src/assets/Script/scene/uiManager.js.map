{"version":3,"sources":["assets\\Script\\scene\\uiManager.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["const { ccclass, property } = cc._decorator;\r\n\r\n@ccclass(\"MenuBar\") \r\nexport default class MenuBar extends cc.Component {\r\n    @property({ type: [cc.Node] })\r\n    slots: cc.Node[] = [];\r\n\r\n    @property({ type: [cc.Prefab] })\r\n    dishPrefabs: cc.Prefab[] = [];\r\n\r\n    @property({ type: cc.Label })\r\n    timerLabel: cc.Label = null; // æ‹–æ‹‰å€’æ•¸æ™‚é–“çš„ Label\r\n\r\n    @property({ type: cc.Prefab })\r\n    timeUpPrefab: cc.Prefab = null;\r\n\r\n    @property({ type: cc.Label })\r\n    scoreLabel: cc.Label = null; // æ‹–æ‹‰åˆ†æ•¸çš„ Label\r\n\r\n    @property\r\n    totalTime: number = 60; // ç¸½å€’æ•¸ç§’æ•¸\r\n\r\n    @property\r\n    dishesPerGame: number = 3; // æ ¼å­æ•¸\r\n\r\n    @property\r\n    dishInterval: number = 5;  // æ¯éš”å¹¾ç§’ç”¢ç”Ÿä¸€å€‹\r\n\r\n    @property({ type: cc.AudioClip })\r\n    bgm: cc.AudioClip = null;\r\n\r\n    @property({ type: cc.AudioClip })\r\n    tenSecBgm: cc.AudioClip = null;\r\n\r\n    @property({ type: cc.Prefab })\r\n    fireEffectPrefab: cc.Prefab = null;\r\n\r\n    @property({ type: cc.Node })\r\n    timerNode: cc.Node = null;  // æ‹– timerLabel çš„ node é€²ä¾†\r\n    private isShaking: boolean = false; // é¿å…é‡è¤‡åŠ å‹•ç•«\r\n\r\n\r\n    private fireEffectNode: cc.Node = null;\r\n        \r\n    private isFireShown: boolean = false;\r\n\r\n\r\n\r\n\r\n    private currentDishIdx: number = 0;\r\n    private currentTime: number = 0;\r\n    private score: number = 0; // åŠ é€™è¡Œ\r\n\r\n    start() {\r\n        this.resetMenu();\r\n        this.startGame();\r\n        if (this.bgm) {\r\n            cc.audioEngine.playMusic(this.bgm, true);\r\n        }\r\n    }\r\n\r\n    /** ç¢ºä¿å ´ä¸Šä¸€ç›´ç¶­æŒ 4 é“èœ */\r\n    checkAndFillSlots() {\r\n        let currentCount = this.slots.filter(slot => slot.children.length > 0).length;\r\n        while (currentCount < this.slots.length) {\r\n            this.generateNextDish();\r\n            currentCount++;\r\n        }\r\n    }\r\n\r\n\r\n    resetMenu() {\r\n        for (let slot of this.slots) {\r\n            slot.removeAllChildren();\r\n        }\r\n        this.currentDishIdx = 0;\r\n        this.unschedule(this.generateNextDish);\r\n        this.unschedule(this.countdownStep);\r\n\r\n        this.setScore(0); // åˆ†æ•¸æ­¸é›¶\r\n    }\r\n\r\n    startGame() {\r\n        this.currentTime = this.totalTime;\r\n        this.updateLabel();\r\n\r\n        this.schedule(this.countdownStep, 1);\r\n        this.generateNextDish();\r\n        this.schedule(this.generateNextDish, this.dishInterval);\r\n\r\n        this.setScore(0); // éŠæˆ²é–‹å§‹åˆ†æ•¸æ­¸é›¶\r\n\r\n        const tenSec = 10;\r\n        if (this.tenSecBgm && this.totalTime > tenSec) {\r\n            this.scheduleOnce(() => {\r\n                cc.audioEngine.stopMusic();\r\n                cc.audioEngine.playMusic(this.tenSecBgm, true);\r\n            }, this.totalTime - tenSec);\r\n        }\r\n    }\r\n\r\n    countdownStep() {\r\n        if (this.currentTime > 0) {\r\n            this.currentTime--;\r\n            this.updateLabel();\r\n\r\n            // â±ï¸ å‰©ä¸‹ 15 ç§’æ™‚é¡¯ç¤ºç«ç„°\r\n            if (this.currentTime === 10 && !this.fireEffectNode) {\r\n                this.spawnFireEffect();\r\n            }\r\n\r\n            \r\n        if (this.currentTime === 10 && !this.isShaking) {\r\n            this.startTimerShake(); // ğŸ¬ å•Ÿå‹•éœ‡å‹•\r\n        }\r\n\r\n            if (this.currentTime === 0) {\r\n                this.timeUp();\r\n                this.stopTimerShake();\r\n            }\r\n        }\r\n    }\r\n\r\n    stopTimerShake() {\r\n        if (this.timerNode) {\r\n            cc.Tween.stopAllByTarget(this.timerNode);\r\n            //   this.timerNode.setPosition(cc.v3(0, 0, 0)); // é‡è¨­ä½ç½®\r\n        }\r\n        this.isShaking = false;\r\n    }\r\n\r\n   \r\n    startTimerShake() {                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  \r\n        if (!this.timerNode) return;\r\n\r\n        this.isShaking = true;\r\n\r\n        cc.tween(this.timerNode)\r\n            .repeatForever(\r\n                cc.tween()\r\n                    .by(0.05, { position: cc.v3(2, 0, 0) })\r\n                    .by(0.05, { position: cc.v3(-4, 0, 0) })\r\n                    .by(0.05, { position: cc.v3(2, 0, 0) })\r\n            )\r\n            .start();\r\n    }\r\n\r\n    spawnFireEffect() {\r\n        if (!this.fireEffectPrefab || !this.timerNode) return;\r\n\r\n        this.fireEffectNode = cc.instantiate(this.fireEffectPrefab);\r\n\r\n        const timerPos = this.timerNode.getPosition(); // Vec2\r\n        const offset = cc.v2(0, 50); // ğŸ†™ å¾€ä¸Š 50 å–µå–µ\r\n        const finalPos = timerPos.add(offset);\r\n\r\n        this.fireEffectNode.setPosition(finalPos);\r\n        this.timerNode.parent.addChild(this.fireEffectNode);\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n\r\n    updateLabel() {\r\n        this.timerLabel.string = this.formatTime(this.currentTime);\r\n    }\r\n\r\n    formatTime(sec: number): string {\r\n        const m = Math.floor(sec / 60);\r\n        const s = sec % 60;\r\n        return `${m}:${s < 10 ? '0' : ''}${s}`;\r\n    }\r\n\r\n    \r\n\r\n    generateNextDish() {\r\n        // æ‰¾ç¬¬ä¸€å€‹ç©ºçš„ slot\r\n        let emptySlotIndex = this.slots.findIndex(slot => slot.children.length === 0);\r\n        if (emptySlotIndex === -1) return;\r\n\r\n        let prefabIdx = Math.floor(Math.random() * this.dishPrefabs.length);\r\n        let dish = cc.instantiate(this.dishPrefabs[prefabIdx]);\r\n\r\n        // åˆå§‹ä½ç½®åœ¨è¢å¹•å³å¤–å´ï¼ˆz è»¸è¨­ 0ï¼‰\r\n        dish.setPosition(cc.v3(800, 0, 0));  // âœ… æ”¹æˆ Vec3\r\n        this.slots[emptySlotIndex].addChild(dish);\r\n\r\n        // å‹•ç•«æ»‘é€² slot ä¸­å¿ƒï¼ˆä¹Ÿæ˜¯ Vec3ï¼‰\r\n        cc.tween(dish)\r\n            .to(0.5, { position: cc.v3(0, 0, 0) }, { easing: 'cubicOut' })  // âœ… Vec3\r\n            .start();\r\n    }\r\n\r\n\r\n    timeUp() {\r\n        this.unschedule(this.countdownStep);\r\n        this.unschedule(this.generateNextDish);\r\n        cc.log(\"Time's up!\");\r\n\r\n        // é¡¯ç¤º Time Up prefab\r\n        if (this.timeUpPrefab) {\r\n            let node = cc.instantiate(this.timeUpPrefab);\r\n            this.node.addChild(node);\r\n\r\n            // åœæ­¢æ‰€æœ‰éŠæˆ²äº’å‹•ã€ç‰©ä»¶å‹•ä½œï¼ˆå¯é¸ï¼‰\r\n            // ä¾‹å¦‚æš«åœæ•µäººã€æš«åœç©å®¶ã€æŒ‰éˆ•ä¸å¯é»ï¼Œè‡ªå·±åŠ \r\n            cc.director.pause();\r\n\r\n            // æš«åœ directorï¼Œä½†å…ˆä¸è¦æš«åœåˆ° delay çµæŸ\r\n            setTimeout(() => {\r\n                // é€™è£¡æ‰æ›å ´æ™¯ï¼Œä¸è¦ç”¨ cc.scheduleOnceï¼Œå¦å‰‡ pause æ™‚ä¸æœƒå‹•\r\n                cc.director.resume();\r\n                cc.director.loadScene('score-scene');\r\n                this.saveScoreAndGotoResult();\r\n            }, 2000); // 2 ç§’\r\n        }\r\n    }\r\n\r\n    saveScoreAndGotoResult() {\r\n        // å–å¾— persist node\r\n        const persistNode = cc.director.getScene().getChildByName('ScorePersist');\r\n        if (persistNode) {\r\n            const persistScript = persistNode.getComponent('ScorePersist');\r\n            persistScript.score = this.score;\r\n            // persistScript.score = 150;\r\n            persistScript.fromScene = cc.director.getScene().name;\r\n        } else {\r\n            cc.error('æ‰¾ä¸åˆ° ScorePersist persist node');\r\n        }\r\n        cc.director.loadScene('ResultScene');\r\n    }\r\n\r\n\r\n    resetAndStart() {\r\n        this.resetMenu();\r\n        this.startGame();\r\n    }\r\n\r\n    // =============== æ–°å¢ ===============\r\n    /** è¨­å®šåˆ†æ•¸ï¼Œå¤–éƒ¨å¯å‘¼å« */\r\n    setScore(newScore: number) {\r\n        this.score = newScore;\r\n        if (this.scoreLabel) {\r\n            this.scoreLabel.string = `${this.score}`;\r\n        }\r\n    }\r\n\r\n    /** å–å¾—ç›®å‰åˆ†æ•¸ */\r\n    getScore(): number {\r\n        return this.score;\r\n    }\r\n\r\n    /** åˆ†æ•¸åŠ æ¸› nï¼Œå¯ä¾éœ€æ±‚ä½¿ç”¨ */\r\n    addScore(delta: number) {\r\n        this.setScore(this.score + delta);\r\n    }\r\n    // ===================================\r\n}\r\n"]}