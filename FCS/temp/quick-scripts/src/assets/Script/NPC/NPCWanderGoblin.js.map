{"version":3,"sources":["assets\\Script\\NPC\\NPCWanderGoblin.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAAM,IAAA,KAAwB,EAAE,CAAC,UAAU,EAAnC,OAAO,aAAA,EAAE,QAAQ,cAAkB,CAAC;AAG5C;IAA6C,mCAAY;IAAzD;QAAA,qEA8CC;QA5CG,cAAQ,GAAW,EAAE,CAAC;QAGtB,cAAQ,GAAW,EAAE,CAAC;QAGtB,UAAI,GAAiB,IAAI,CAAC;QAElB,SAAG,GAAY,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;QAC3B,WAAK,GAAW,CAAC,CAAC;QAClB,QAAE,GAAiB,IAAI,CAAC;;IAkCpC,CAAC;IAhCG,+BAAK,GAAL;QACI,IAAI,CAAC,EAAE,GAAG,IAAI,CAAC,YAAY,CAAC,EAAE,CAAC,SAAS,CAAC,CAAC;QAC1C,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,mBAAmB,EAAE,IAAI,CAAC,MAAM,EAAE,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,aAAa;QAC7E,IAAI,CAAC,mBAAmB,EAAE,CAAC;IAC/B,CAAC;IAED,6CAAmB,GAAnB;QACI,IAAM,KAAK,GAAG,IAAI,CAAC,MAAM,EAAE,GAAG,IAAI,CAAC,EAAE,GAAG,CAAC,CAAC;QAC1C,IAAI,CAAC,GAAG,GAAG,EAAE,CAAC,EAAE,CAAC,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC,SAAS,EAAE,CAAC;QAC/D,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,MAAM,EAAE,GAAG,CAAC,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC,CAAC;QAE7E,IAAI,IAAI,CAAC,IAAI;YAAE,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;IAChD,CAAC;IAED,gCAAM,GAAN,UAAO,EAAU;QACb,IAAI,IAAI,CAAC,EAAE,EAAE;YACT,IAAI,CAAC,EAAE,CAAC,cAAc,GAAG,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;YAElD,IAAI,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE;gBAC7C,IAAI,CAAC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;aAC9C;SACJ;IACL,CAAC;IAGD,wCAAc,GAAd,UAAe,OAAO,EAAE,YAAY,EAAE,aAAa;QAC/C,IAAI,aAAa,CAAC,IAAI,CAAC,IAAI,KAAK,cAAc,EAAE;YAC5C,IAAI,CAAC,GAAG,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;YACvB,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC;YACf,IAAI,IAAI,CAAC,IAAI;gBAAE,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;SAChD;IACL,CAAC;IA3CD;QADC,QAAQ;qDACa;IAGtB;QADC,QAAQ;qDACa;IAGtB;QADC,QAAQ,CAAC,EAAE,CAAC,SAAS,CAAC;iDACG;IART,eAAe;QADnC,OAAO;OACa,eAAe,CA8CnC;IAAD,sBAAC;CA9CD,AA8CC,CA9C4C,EAAE,CAAC,SAAS,GA8CxD;kBA9CoB,eAAe","file":"","sourceRoot":"/","sourcesContent":["const { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class NPCWanderGoblin extends cc.Component {\r\n    @property\r\n    minSpeed: number = 30;\r\n\r\n    @property\r\n    maxSpeed: number = 40;\r\n\r\n    @property(cc.Animation)\r\n    anim: cc.Animation = null;\r\n\r\n    private dir: cc.Vec2 = cc.v2(0, 0);\r\n    private speed: number = 0;\r\n    private rb: cc.RigidBody = null;\r\n\r\n    start() {\r\n        this.rb = this.getComponent(cc.RigidBody);\r\n        this.schedule(this.pickRandomDirection, Math.random() * 2 + 1); // 每 1~3 秒換方向\r\n        this.pickRandomDirection();\r\n    }\r\n\r\n    pickRandomDirection() {\r\n        const angle = Math.random() * Math.PI * 2;\r\n        this.dir = cc.v2(Math.cos(angle), Math.sin(angle)).normalize();\r\n        this.speed = this.minSpeed + Math.random() * (this.maxSpeed - this.minSpeed);\r\n\r\n        if (this.anim) this.anim.play(\"goblin_run\");\r\n    }\r\n\r\n    update(dt: number) {\r\n        if (this.rb) {\r\n            this.rb.linearVelocity = this.dir.mul(this.speed);\r\n\r\n            if (Math.abs(this.dir.x) > Math.abs(this.dir.y)) {\r\n                this.node.scaleX = this.dir.x > 0 ? 1 : -1;\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    onBeginContact(contact, selfCollider, otherCollider) {\r\n        if (otherCollider.node.name === \"DeskCollider\") {\r\n            this.dir = cc.v2(0, 0);\r\n            this.speed = 0;\r\n            if (this.anim) this.anim.play(\"goblin_idle\");\r\n        }\r\n    }\r\n}\r\n"]}