{"version":3,"sources":["assets\\Script\\script\\PlayerAnimationController.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["const { ccclass, property } = cc._decorator;\r\nimport GameManager from \"./GameManager-level1\";\r\n\r\n@ccclass\r\nexport default class PlayerAnimationController extends cc.Component {\r\n    @property(cc.Node)\r\n    toggleGroupNode: cc.Node = null;\r\n\r\n    @property(cc.Node)\r\n    player1: cc.Node = null;\r\n\r\n    @property(cc.Node)\r\n    player2: cc.Node = null;\r\n\r\n    @property(cc.Button)\r\n    buttonGirl: cc.Button = null;\r\n\r\n    @property(cc.Button)\r\n    buttonGirl2: cc.Button = null;\r\n\r\n    @property(cc.Node)\r\n    choosePlayerNode: cc.Node = null;\r\n\r\n    // ✅ 記錄 player1 / player2 各自的角色選擇\r\n    public static player1CharIndex: number = 0; // 0 = girl1, 1 = girl2\r\n    public static player2CharIndex: number = 0;\r\n\r\n    start() {\r\n        this.buttonGirl.node.on('click', () => {\r\n            this.assignCharIndex(0); // girl1\r\n        }, this);\r\n\r\n        this.buttonGirl2.node.on('click', () => {\r\n            this.assignCharIndex(1); // girl2\r\n        }, this);\r\n    }\r\n\r\n    getSelectedPlayer(): cc.Node {\r\n        if (this.choosePlayerNode.active === false) {\r\n            return this.player1;\r\n        }\r\n        const toggles = this.toggleGroupNode.getComponentsInChildren(cc.Toggle);\r\n        const selectedIdx = toggles.findIndex(t => t.isChecked);\r\n        return selectedIdx === 0 ? this.player1 : this.player2;\r\n    }\r\n\r\n    // ✅ 改這裡：根據選擇的玩家，記錄他選的角色，並切動畫\r\n    assignCharIndex(index: number) {\r\n        const player = this.getSelectedPlayer();\r\n\r\n        if (player === this.player1) {\r\n            PlayerAnimationController.player1CharIndex = index;\r\n        } else {\r\n            PlayerAnimationController.player2CharIndex = index;\r\n        }\r\n\r\n        const prefix = index === 0 ? \"girl\" : \"girl2\";\r\n        this.changeAnimation(`${prefix}_idle`);\r\n    }\r\n\r\n    changeAnimation(animName: string) {\r\n        const player = this.getSelectedPlayer();\r\n        if (!player) return;\r\n        const anim = player.getComponent(cc.Animation);\r\n        if (anim) {\r\n            anim.play(animName);\r\n        }\r\n    }\r\n}\r\n"]}